<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.IUserDao">
    <!-- 配置表Student所有操作 -->
    <!--id = method, resultType = returnType-->
    <select id="findAllStudent" resultType="entity.Student">
        select * from student
    </select>

    <insert id="insertStudent" parameterType="entity.Student">
        <!--配置插入操作之后获取插入id-->
        <selectKey keyProperty="stuID" keyColumn="stuID" resultType="int" order="AFTER">
            select last_insert_id();
        </selectKey>
        insert into student(name,birthday,communication,email,password,classID,dormitoryID)values(#{name},#{birthday},#{communication},#{email},#{password},#{classID},#{dormitoryID})
    </insert>

    <update id="updateStudent" parameterType="entity.Student">
        update student set name=#{name},birthday=#{birthday},communication=#{communication},email=#{email},password=#{password},classID=#{classID},dormitoryID=#{dormitoryID}
    </update>

    <delete id="deleteStudent" parameterType="java.lang.Integer">
        delete from student where stuID = #{stuID}
    </delete>

    <select id="findStudentbyID" parameterType="int" resultType="entity.Student">
        select * from student where stuID=#{stuID}
    </select>

    <select id="findStudentbyName" parameterType="String" resultType="entity.Student">
        select * from student where name=#{name}
    </select>

    <!--配置Teacher 所有操作-->
    <select id="findTeacherbyID" parameterType="int" resultType="entity.Teacher">
        select * from teacher where teacherID=#{teacherID}
    </select>

    <select id="findAllTeacher" resultType="entity.Teacher">
        select * from teacher
    </select>

    <insert id="insertTeacher" parameterType="entity.Teacher">
        insert into teacher(name,birthday,communication,email,password,deptID)values(#{name},#{birthday},#{communication},#{email},#{password},#{deptID})
    </insert>

    <update id="updateTeacher" parameterType="entity.Teacher">
        update teacher set name=#{name},birthday=#{birthday},communication=#{communication},email=#{email},password=#{password},deptID=#{deptID}
    </update>

    <delete id="deleteTeacher" parameterType="java.lang.Integer">
        delete from teacher where teacherID = #{teacherID}
    </delete>

    <!--配置Manage表-->
    <select id="findManagebyTeacherID" parameterType="int" resultType="relation.Manage">
        select * from manage where teacherID=#{teacherID}
    </select>

    <!--配置Department表-->
    <select id="findDepartmentbyID" parameterType="int" resultType="entity.Department">
        select * from department where departID=#{deptID}
    </select>
</mapper>