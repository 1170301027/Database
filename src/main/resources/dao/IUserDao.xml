<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.IUserDao">
    <!-- 配置表Student所有操作 -->
    <!--id = method, resultType = returnType-->
    <select id="findAllStudent" resultType="entity.Student">
        select * from student
    </select>

    <insert id="insertStudent" parameterType="entity.Student">
        <!--配置插入操作之后获取插入id-->
        <selectKey keyProperty="stuID" keyColumn="stuID" resultType="int" order="AFTER">
            select last_insert_id();
        </selectKey>
        insert into student(name,birthday,communication,email,password,classID,dormitoryID)values(#{name},#{birthday},#{communication},#{email},#{password},#{classID},#{dormitoryID})
    </insert>

    <update id="updateStudent" parameterType="entity.Student">
        update student set name=#{name},birthday=#{birthday},communication=#{communication},email=#{email},password=#{password},classID=#{classID},dormitoryID=#{dormitoryID}
    </update>

    <delete id="deleteStudent" parameterType="java.lang.Integer">
        delete from student where stuID = #{stuID}
    </delete>

    <select id="findStudentbyID" parameterType="int" resultType="entity.Student">
        select * from student where stuID=#{stuID}
    </select>

    <select id="findStudentbyName" parameterType="String" resultType="entity.Student">
        select * from student where name=#{name}
    </select>

    <select id="findStudentbyClassID" parameterType="int" resultType="entity.Student">
        select * from student where classID=#{classID}
    </select>

    <!--配置Teacher 所有操作-->
    <select id="findTeacherbyID" parameterType="int" resultType="entity.Teacher">
        select * from teacher where teacherID=#{teacherID}
    </select>

    <select id="findTeacherbyName" parameterType="String" resultType="entity.Teacher">
        select * from teacher where name=#{name}
    </select>

    <select id="findAllTeacher" resultType="entity.Teacher">
        select * from teacher
    </select>

    <insert id="insertTeacher" parameterType="entity.Teacher">
        insert into teacher(name,birthday,communication,email,password,deptID)values(#{name},#{birthday},#{communication},#{email},#{password},#{deptID})
    </insert>

    <update id="updateTeacher" parameterType="entity.Teacher">
        update teacher set name=#{name},birthday=#{birthday},communication=#{communication},email=#{email},password=#{password},deptID=#{deptID}
    </update>

    <delete id="deleteTeacher" parameterType="java.lang.Integer">
        delete from teacher where teacherID = #{teacherID}
    </delete>

    <!--配置Manage表-->
    <select id="findManagebyTeacherID" parameterType="int" resultType="relation.Manage">
        select * from manage where teacherID=#{teacherID}
    </select>

    <!--配置Department表-->
    <select id="findDepartmentbyID" parameterType="int" resultType="entity.Department">
        select * from department where departID=#{deptID}
    </select>

    <!--配置Class表-->
    <select id="findClassbyID" parameterType="int" resultType="entity.Class">
        select * from class where classID=#{classID}
    </select>

    <!--配置Elect表-->
    <select id="findElectbyStuID" parameterType="int" resultType="relation.Elect">
        select * from elect where stuID=#{stuID}
    </select>

    <select id="findElectbyStuIDAndClassID" parameterType="int" resultType="relation.Elect">
        select * from elect where stuID=#{stuID} and classID=#{classID}
    </select>

    <select id="findAllElect" resultType="relation.Elect">
        select * from elect
    </select>

    <select id="lookupElectedCourseID" resultType="int">
        select courseID from elect where stuID=#{stuID}
    </select>

    <insert id="insertElect" parameterType="relation.Elect">
        insert into elect(courseID,stuID,achievement)values(#{courseID},#{stuID},#{achievement})
    </insert>

    <!--配置Course表-->
    <select id="findCoursebyID" parameterType="int" resultType="entity.Course">
        select * from course where courseID=#{courseID}
    </select>

    <select id="findCoursebyTeacherID" parameterType="int" resultType="entity.Course">
        select * from course where teacherID = #{teacherID}
    </select>

    <select id="findAllCourse" resultType="entity.Course">
        select * from course
    </select>

    <select id="findAllCourseID" resultType="int">
        select courseID from course;
    </select>

    <!--配置Classroom表-->
    <select id="findClassroombyclassroomID" parameterType="int" resultType="entity.Classroom">
        select * from classroom where classroomID=#{classroomID}
    </select>

    <!--配置College表-->
    <select id="findCollegeNamebyCollegeID" parameterType="int" resultType="String">
        select name from college where collegeID=#{collegeID}
    </select>
</mapper>